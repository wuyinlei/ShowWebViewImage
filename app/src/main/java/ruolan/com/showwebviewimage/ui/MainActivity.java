package ruolan.com.showwebviewimage.ui;

import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.webkit.WebView;

import java.util.List;

import ruolan.com.showwebviewimage.webview.PhotoJavascriptInterface;
import ruolan.com.showwebviewimage.webview.PhotoWebViewClient;
import ruolan.com.showwebviewimage.R;
import ruolan.com.showwebviewimage.utils.StringUtils;

public class MainActivity extends AppCompatActivity {

    WebView mWebView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);


        String info = "<html lang=\"zh\">n         <head>n         <title>亚洲50最佳餐厅宣布André Chiang荣获2018年终身成就奖</title>n         <meta charset=\"UTF-8\">n         <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, minimal-ui\">n         <meta name=\"format-detection\" content=\"telephone=no\" />n         <link rel=\"stylesheet\" href=\"http://static.greatchef.com.cn/m/styles/styles.css?t=612345\">n          <link href=\"http://m.greatchef.com.cn/Public/styles/video-js.min.css\" rel=\"stylesheet\"> nn         <style>n         img{width: 100%;height: auto;}n         ol{list-style: none;}n         .inf_v_zhuc a{n            color: #ad8748;n         }nn         </style>n         </head>n         <script>n        fnResize();n        window.addEventListener(\"resize\", function() {n            fnResize()n        }, false);n        function fnResize(){n            var docWidth = document.documentElement.clientWidth,n                    body = document.getElementsByTagName(\"html\")[0];n            body.style.fontSize = docWidth / 30 + \"px\";n        }n         </script>n         <body>n         <div class=\"inf_v_zhuc\" style=\"border-bottom:none\" id=\"img-content\">n         <h1 style=\"color:#000\">亚洲50最佳餐厅宣布André Chiang荣获2018年终身成就奖</h1>n         <div class=\"tips\">n            <span>资讯</span>n            编辑/ 小小睿 2018.02.27n            </div>n            <p class=\"inf_img\">n            <img src=\"http://img.greatchef.com.cn/Nuploads/NewsImage/5a95345989b5b.jpg\"  class=\"i_zhuc\"  width=\"640\" height=\"341.88034188034\">n            </p><p class=\"inf_txt\">来自台湾的著名主厨、新加坡Restaurant André及台北RAW之创办人André Chiang荣获2018年The Diners Club®终身成就奖(亚洲)。</p>rn<p class=\"inf_txt\">The Diners Club®终身成就奖是由圣沛黎洛 (S.Pellegrino) 和巴娜 (Acqua Panna)赞助的“亚洲50最佳餐厅”奖项之一。“亚洲50最佳餐厅”评委会投票评选得奖人；评委会由300位来自亚洲各地餐饮业界的专业人士组成。</p><p class=\"inf_txt\">得悉获奖后，André Chiang表示：“我为能成为首位华裔厨师登上‘世界50最佳餐厅’而感到兴奋；而这次我能成为获得此荣誉的首位华裔厨师，我同样深感荣幸。我一直以来的目标是要将亚洲放在世界厨艺版图之上，而此奖项令我将坚决地去实践此目标。此时此刻将永远在我的记忆之中。”</p>rn<p class=\"inf_txt\">“亚洲50最佳餐厅”编辑William Drew表示:“André Chiang绝对是世界上最受尊敬、出色及成功的厨师之一，他荣获The Diners Club®终身成就奖(亚洲) 可谓实至名归。我们期待见证他灿烂仕途的新一页。”</p><p class=\"inf_img\"><img src=\"http://img.greatchef.com.cn/ueditor/php/upload/image/20180227/s_1519719421834397.jpg\" title=\"1519719421834397.jpg\" width=\"750\" height=\"500\" alt=\"André Chiang_Portrait_Credit to Nieve Photography.jpg\"></p><p style=\"font-size:12px; line-height:20px; margin:0 43px 28px; text-align:center; color:#9b9b9b; display: -webkit-box;-webkit-box-orient: vertical;-webkit-line-clamp: 2;overflow: hidden;\">André Chiang</p><p class=\"inf_txt\">出生于一个热衷创作的家庭的André Chiang于13岁暂停了学业，并到母亲位于日本的中式餐厅中学习。他花了两年的时间磨练中式烹饪技巧及日本料理，之后前往欧洲继续进修厨艺。他之后移居至法国南部蒙彼利埃（Montpellier），并在著名的Le Jardin des Sens餐厅中接受Jacques及Laurent Pourcel兄弟的指导。在法国生活的14年间，André Chiang曾与名厨Pierre Gagnaire、Michel Troisgros及Jöel Robuchon工作，完美掌握了法式烹饪技术。</p>rn<p class=\"inf_txt\">André Chiang随后返回亚洲并定居新加坡，他于2008年在新加坡瑞士史丹福酒店开设了40座的高级法餐厅Jaan par André，迅速蜚声国际的Jaan par André更于2010年“世界50最佳餐厅”名单上首次亮相。 精心设计的地中海风味餐单将André Chiang在法式烹调上的创造力和对细节的一丝不苟表露无遗。食客亦可藉此接触主厨独到的“八角哲学”（Octaphilosophy），从盐（Salt）、质感（Texture）、独特性（Unique）、记忆（Memory）、纯净（Purity）、风土名物（Terroir）、南法（South）及工艺 （Artisan）这八个元素，体现André Chiang所秉持的美食理念。</p><p class=\"inf_txt\">Restaurant André-这间以André Chiang命名的30座餐厅位于新加坡唐人街一栋建于二十世纪的三层建筑物中，于2010年开幕并于本年2月光荣结业。Restaurant André于2013年首次被列入“世界50最佳餐厅”名单，排名第38位，去年更晋升至第14位，一直在“亚洲50最佳餐厅”名单中位居前十名的 Restaurant André 亦于2017年夺得第二名的佳绩。</p>rn<p class=\"inf_img\"><img src=\"http://img.greatchef.com.cn/ueditor/php/upload/image/20180227/s_1519720029999185.jpg\" title=\"1519720029999185.jpg\" width=\"750\" height=\"500\" alt=\"Restaurant Andre_Interior - Photo Credit Nat K.jpg\"></p><p style=\"font-size:12px; line-height:20px; margin:0 43px 28px; text-align:center; color:#9b9b9b; display: -webkit-box;-webkit-box-orient: vertical;-webkit-line-clamp: 2;overflow: hidden;\">Restaurant André</p>rn<p class=\"inf_txt\">André Chiang于2013年在新加坡开设了烧烤餐厅Burnt Ends，并于翌年在家乡台北开设餐厅Raw，继而拓展他在亚洲的影响力。 Raw的餐厅设计创新并以充满灵感的艺术品装饰，餐单将季节性的台湾食材与现代国际风味完美融合。于2016年被列入“亚洲50最佳餐厅”名单的Raw在去年排名第24位，更被冠上“台湾最佳餐厅”之名。</p>rn<p class=\"inf_txt\">André Chiang在去年10月宣布计划于2月将Restaurant André结业并返回家乡台湾时，轰动亚洲饮食界。 André Chiang在官方声明中表示，此举是为了“更专注教育与培养人才......为年轻的厨师们提供更好的教育与餐饮文化......即使Restaurant André所成就的一切即将在世界美食版图里结束，成为所有热爱美食的你们的回忆，我亦无憾。因为我们已经为新加坡及亚洲达到我们的目的。”</p>rn<p class=\"inf_img\"><img src=\"http://img.greatchef.com.cn/ueditor/php/upload/image/20180227/s_1519720174994484.jpg\" title=\"1519720174994484.jpg\" width=\"750\" height=\"500\" alt=\"22222.jpg\"></p><p class=\"inf_txt\">Diners Club International副主席Sheryl Yasger指：“The Diners Club®很荣幸能够表扬André Chiang在饮食界的才华、热情及贡献。我们很高兴能够支持‘亚洲50最佳餐厅’，并祝贺André Chiang获选为2018年The Diners Club®终身成就奖得主。”</p><p class=\"inf_img\"><img src=\"http://img.greatchef.com.cn/ueditor/php/upload/image/20180227/s_1519720049376386.jpg\" title=\"1519720049376386.jpg\" width=\"750\" height=\"504\" alt=\"11111.jpg\"></p>rn<p class=\"inf_txt\">André Chiang将于2018年3月27日在澳门永利皇宫举行的第六届“亚洲50佳餐厅”颁奖典礼上领奖。</p><p class=\"inf_txt\"><b style=\"color:#363636;\">“亚洲 50 最佳餐厅”名单的编选制度</b></p>rn<p class=\"inf_txt\"><i>“亚洲50最佳餐厅”名单由The Diners Club®“亚洲50最佳餐厅”评审委员会投票选出，该评审委员会由超过 300 名在亚洲餐饮界具有一定影响力的人士组成，每位获邀加入评审委员会的成员均对亚洲餐饮业抱有独到见解。</i></p>rn<p class=\"inf_txt\"><i>各地区的评审委员会的成员包括食评家、厨师、餐厅东主和及备受推崇的美食家。会员根据其过去18个月到访餐厅的用餐体验，按喜好顺序列出他们的最佳餐厅。投票并未预设评分标准，但评判需遵循严格投票规则。</i></p>rn<p class=\"inf_txt\"><i>2018 年“亚洲 50 最佳餐厅”将聘请专业咨询机构德勤(Deloitte)作为官方独立审裁合作伙伴。德勤将确保投票过程的公正性及真实性，以及“亚洲 50 最佳餐厅”名单的评选结果保密。</i></p>rn<p class=\"inf_end\">-end-</p>n            </div>n            <script type=\"text/javascript\" src=\"http://m.greatchef.com.cn/Public/js/resetimg.js\"></script>n            <script type=\"text/javascript\" src=\"http://m.greatchef.com.cn/Public/js/jquery-1.12.3.min.js\"></script>n             <script type=\"text/javascript\" src=\"http://m.greatchef.com.cn/Public/js/video.min.js\"></script>nn            </body>n            <script type=\"text/javascript\">n            resizeIframe();n            function resizeIframe(){n                var bodyw=document.body.clientWidth-30;n                console.log(bodyw);n                var ilengths=document.getElementsByTagName(\"iframe\").length;n                if(ilengths>0){n                    for(var ilength=0;ilength<ilengths;ilength++){n                        document.getElementsByTagName(\"iframe\")[ilength].width = bodyw;//设定高度n                        document.getElementsByTagName(\"iframe\")[ilength].height = bodyw*9/16;//设定高度n                   }    n                }    n            }nn            var width=document.body.clientWidth-30;n            var height = width*9/16n            $(\".ccc\").each(function(k,v){n                $(\"#\"+$(v).data(\"img\")).css(\"width\",width);n                $(\"#\"+$(v).data(\"img\")).css(\"height\",height);n                $(\"#\"+$(v).data(\"video\")).css(\"width\",width);n                $(\"#\"+$(v).data(\"video\")).css(\"height\",height);nn            });nn            $(\".ccc\").click(function(){n                $(this).hide();n                $(\"#\"+$(this).data(\"img\")).hide();n                $(\"#\"+$(this).data(\"video\")).show();n                $(\"#\"+$(this).data(\"video\")+\"_html5_api\").show();n                $(\".vjs-big-play-button\").hide();n                videojs($(this).data(\"video\")).play();n            })nn             </script>n            </html>";

        List<String> imageUrls = StringUtils.returnImageUrlsFromHtml(info);


        mWebView = findViewById(R.id.web_view);
        mWebView.getSettings().setJavaScriptEnabled(true);
        mWebView.getSettings().setAppCacheEnabled(true);
        mWebView.getSettings().setDatabaseEnabled(true);
        mWebView.getSettings().setDomStorageEnabled(true);
        mWebView.loadDataWithBaseURL(null, info, "text/html", "utf-8", null);
        mWebView.addJavascriptInterface(new PhotoJavascriptInterface(this, imageUrls), "imagelistener");
        mWebView.setWebViewClient(new PhotoWebViewClient());


    }
}
